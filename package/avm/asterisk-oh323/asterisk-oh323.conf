ao323-premake() {
	mydir="$PWD"
	
	tar $taropt $archdir/pwlib-Janus*
	cd pwlib
	eval ./configure
	eval make $makeopt clean opt
	cd "$mydir"

	tar $taropt $archdir/openh323-Janus*
	cd openh323
	patch -p1 < ../openh323_1.13.5-make.patch
	eval ./configure
	eval make $makeopt clean opt
	cd "$mydir"
}

hook_add premake 2 "ao323-premake"
hook_add premake 3 "sed -i Makefile -e 's,^\(DESTDIR=\).*,\1$root/,' \
	-e 's,^\(PWLIBDIR=\).*,\1../pwlib,' \
	-e 's,^\(OPENH323DIR=\).*,\1../openh323,' \
	-e 's,^\(ASTERISKINCDIR=\).*,\1$includedir,' \
	-e 's,^\(ASTERISKMODDIR=\).*,\1$libdir/asterisk/modules,' \
	-e 's,^\(ASTERISKETCDIR=\).*,\1$sysconfdir/asterisk,' \
	-e 's,^\(OH323WRAPLIBDIR=\).*,\1$libdir,'"

