#!/bin/bash
# --- ROCK-COPYRIGHT-NOTE-BEGIN ---
# 
# This copyright note is auto-generated by ./scripts/Create-CopyPatch.
# Please add additional copyright information _after_ the line containing
# the ROCK-COPYRIGHT-NOTE-END tag. Otherwise it might get removed by
# the ./scripts/Create-CopyPatch script. Do not edit this copyright text!
# 
# ROCK Linux: rock-src/package/base/linux-libc-headers/linux-libc-headers.conf
# ROCK Linux is Copyright (C) 1998 - 2006 Clifford Wolf
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 2 of the License, or
# (at your option) any later version. A copy of the GNU General Public
# License can be found at Documentation/COPYING.
# 
# Many people helped and are helping developing ROCK Linux. Please
# have a look at http://www.rocklinux.org/ and the Documentation/TEAM
# file for details.
# 
# --- ROCK-COPYRIGHT-NOTE-END ---

lx_cpu="$arch_machine"
incdir=$root/$prefix/include

case "$xpkg" in
	*-cross-*)
		lx_cpu="${xpkg#**-cross-}"
		incdir=$root/$prefix/$lx_cpu-unknown-linux-gnu/include
		;;		
esac

lx_cpu=$( echo "$lx_cpu" | \
	sed -e s/x86$/i386/ -e s/powerpc/ppc/    \
		-e s/hppa/parisc/ -e s/i.86/i386/    \
		-e s/sun4u/sparc64/ -e s/arm.*/arm/  \
		-e s/sa110/arm/ -e s/s390x/s390/     \
		-e s/parisc64/parisc/ )

custmain=llh_main
llh_main() {
	cp -av include/{asm-generic,asm-$lx_cpu,linux} $incdir/
	ln -svf asm-$lx_cpu $incdir/asm

	if [ "$ROCKCFG_MULTILIB" = 1 ] ; then
		case "$lx_cpu" in
		sparc64)
			cp -av include/asm-{sparc,sparc64-biarch} $incdir/
			ln -svf asm-sparc64-biarch $incdir/asm
			;;
		x86_64)
			cp -av include/asm-{i386,x86_64-biarch} $incdir/
			ln -svf asm-x86_64-biarch $incdir/asm
			;;
		ppc)
			cp -av include/asm-powerpc $incdir/
			ln -svf asm-powerpc $incdir/asm
			;;
		esac
	fi
}
