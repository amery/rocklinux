--- xc/programs/Xserver/hw/xfree86/os-support/bus/linuxPci.c.orig	2004-08-22 23:09:02.000000000 +0200
+++ xc/programs/Xserver/hw/xfree86/os-support/bus/linuxPci.c	2004-08-22 23:10:51.000000000 +0200
@@ -196,6 +196,8 @@
  *         master aborts are avoided during PCI scans).
  */
 
+#include <asm/types.h>
+typedef unsigned long kernel_ulong_t;
 #include <linux/pci.h>
 
 #ifndef PCIIOC_BASE		/* Ioctls for /proc/bus/pci/X/Y nodes. */
--- xc/programs/Xserver/hw/xfree86/os-support/bus/xf86Sbus.h.orig	2004-08-22 23:15:10.000000000 +0200
+++ xc/programs/Xserver/hw/xfree86/os-support/bus/xf86Sbus.h	2004-08-22 23:15:25.000000000 +0200
@@ -27,6 +27,7 @@
 
 #if defined(linux)
 #include <asm/types.h>
+#include <linux/fb.h>
 #include <asm/fbio.h>
 #include <asm/openpromio.h>
 #elif defined(SVR4)
